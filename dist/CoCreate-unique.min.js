!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.CoCreate=t():(e.CoCreate=e.CoCreate||{},e.CoCreate.unique=t())}(this,(function(){return(()=>{var e={212:function(e,t){var n;"undefined"!=typeof self&&self,void 0===(n=function(){return function(e){const t={attribute:"data-uuid",init:function(t){if(!e.document)return;const n=t||e.document;if(!n.querySelectorAll)return;let r=n.querySelectorAll(`[${this.attribute}]`);const i=this;r.forEach((e=>{const t=parseInt(e.getAttribute(i.attribute))||36,n=i.generate(t);"INPUT"===e.tagName||"TEXTAREA"===e.tagName?e.value=n:e.innerHTML=n}))},generate:function(t=36){let n=(new Date).getTime(),r=e.performance&&e.performance.now&&1e3*e.performance.now()||0,i="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx";if(t<=i.length)i=i.substr(0,t);else{let e=t-i.length,n="-xxxyyxxx",r=Math.floor(e/n.length);for(let e=0;e<r;e++)i+=n;r=e-r*n.length,i+=n.substr(0,r)}return i.replace(/[xy]/g,(function(e){var t=16*Math.random();return n>0?(t=(n+t)%16|0,n=Math.floor(n/16)):(t=(r+t)%16|0,r=Math.floor(r/16)),("x"==e?t:7&t|8).toString(16)}))}};return t.init(),t}(window)}.apply(t,[]))||(e.exports=n)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var u=t[r]={exports:{}};return e[r].call(u.exports,u,u.exports,n),u.exports}var r={};return(()=>{"use strict";var e,t=(e=n(212))&&e.__esModule?e:{default:e};const r={selector:"input[data-unique='true'], textarea[data-unique='true']",requestAttr:"data-unique_request_id",init:function(e){let n=e||document;if(!n.querySelectorAll)return;let r=n.querySelectorAll(this.selector);const i=this;r.forEach((e=>{const n=t.default.generate();e.setAttribute(i.requestAttr,n),i.setInputEvent(e)}))},initListener:function(){const e=this;CoCreate.crud.listenMessage("checkedUnique",(function(t){e.checkedUnique(t)}))},checkedUnique:function(e){const t=e.request_id;if(!t)return;const n=document.querySelector(`[${this.requestAttr}='${t}']`);e.unique?(n.classList.remove("data-unique-invalid"),n.classList.add("data-unique-valid")):(n.classList.remove("data-unique-valid"),n.classList.add("data-unique-invalid"))},setInputEvent:function(e){const t=this;e.addEventListener("input",(function(n){let r=CoCreate.getCommonParams();r.collection=e.getAttribute("data-collection"),r.name=e.getAttribute("name"),r.value=n.target.value,r.request_id=e.getAttribute(t.requestAttr),CoCreate.socket.send("checkUnique",r)}))},checkValidate:function(e){const t=e.querySelectorAll(this.selector);for(let e=0;e<t.length;e++)if(!t[e].classList.contains("data-unique-success"))return!1;return!0}};r.init(),r.initListener()})(),r=r.default})()}));