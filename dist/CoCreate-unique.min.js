!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.CoCreate=t():(e.CoCreate=e.CoCreate||{},e.CoCreate.unique=t())}(this,(function(){return(()=>{"use strict";var e={};const t={selector:"input[data-unique='true'], textarea[data-unique='true']",requestAttr:"data-unique_request_id",init:function(e){let t=e||document;if(!t.querySelectorAll)return;let n=t.querySelectorAll(this.selector);const i=this;n.forEach((e=>{const t=CoCreate.utils.generateUUID();e.setAttribute(i.requestAttr,t),i.setInputEvent(e)}))},initListener:function(){const e=this;CoCreate.crud.listenMessage("checkedUnique",(function(t){e.checkedUnique(t)}))},checkedUnique:function(e){const t=e.request_id;if(!t)return;const n=document.querySelector(`[${this.requestAttr}='${t}']`);e.unique?(n.classList.remove("data-unique-invalid"),n.classList.add("data-unique-valid")):(n.classList.remove("data-unique-valid"),n.classList.add("data-unique-invalid"))},setInputEvent:function(e){const t=this;e.addEventListener("input",(function(n){let i=CoCreate.getCommonParams();i.collection=e.getAttribute("data-collection"),i.name=e.getAttribute("name"),i.value=n.target.value,i.request_id=e.getAttribute(t.requestAttr),CoCreate.socket.send("checkUnique",i)}))},checkValidate:function(e){const t=e.querySelectorAll(this.selector);for(let e=0;e<t.length;e++)if(!t[e].classList.contains("data-unique-success"))return!1;return!0}};return t.init(),t.initListener(),e=e.default})()}));